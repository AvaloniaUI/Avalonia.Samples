<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.26">
<link rel="icon" type="image/svg" href="../../../../_docs/_Assets/Logo.svg">
<title>Advanced Todo-List Sample</title>
<style>
@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css);

:root {
    --background: #fff;
    --black-color: #000;
    --background-yellow: #ff0;
    --border: #c0c0c0;
    --gray-color: #6c818f;
    --link-color-default: var(--accent-primary-color);
    --foreground-color: #222222;
    --accent-primary-color: #3578e5;
    --accent-secondary-color: #102445;
    --border2: #dddddd;
    --block-quote-color: #748590;
    --pre-background-color: #f2f2f2;
    --dark-gray-color: #333333;
    --kdb-background-color: #F7F7F7;
    --header-color: var(--accent-primary-color);
    --link-hover-color: #102445;
    --toc-border-color: #d9d9d9;
    --exampleblock-border-color: #e6e6e6;
    --em-color: #373737;
    --admotion-background-color: #e6e6e6;
    --sidebar-background-color: #e8ecef;
    --border-radius-default: 6px;
}

/* normalize.css v2.1.1 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
    display: block;
}

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video {
    display: inline-block;
}

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) {
    display: none;
    height: 0;
}

/** Address styling not present in IE 8/9. */
[hidden] {
    display: none;
}

/* ========================================================================== Base ========================================================================== */
/** 1. Prevent system color scheme's background color being used in Firefox, IE, and Opera. 2. Prevent system color scheme's text color being used in Firefox, IE, and Opera. 3. Set default font family to sans-serif. 4. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html {
    background: var(--background); /* 1 */
    color: var(--black-color); /* 2 */
    font-family: sans-serif; /* 3 */
    -ms-text-size-adjust: 100%; /* 4 */
    -webkit-text-size-adjust: 100%; /* 4 */
}

/** Remove default margin. */
body {
    margin: 0;
}

/* ========================================================================== Links ========================================================================== */
/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus {
    outline: thin dotted;
}

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover {
    outline: 0;
}

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] {
    border-bottom: 1px dotted;
}

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong {
    font-weight: bold;
}

/** Address styling not present in Safari 5 and Chrome. */
dfn {
    font-style: italic;
}

/** Address differences between Firefox and other browsers. */
hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/** Address styling not present in IE 8/9. */
mark {
    background: var(--background-yellow);
    color: var(--black-color);
}

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp {
    font-family: monospace, serif;
    font-size: 1em;
}

/** Improve readability of pre-formatted text in all browsers. */
pre {
    white-space: pre-wrap;
}

/** Set consistent quote types. */
q {
    quotes: "\201C" "\201D" "\2018" "\2019";
}

/** Address inconsistent and variable font size in all browsers. */
small {
    font-size: 80%;
}

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img {
    border: 0;
}

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) {
    overflow: hidden;
}

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure {
    margin: 0;
}

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset {
    border: 1px solid var(--border);
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend {
    border: 0; /* 1 */
    padding: 0; /* 2 */
}

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea {
    font-family: inherit; /* 1 */
    font-size: 100%; /* 2 */
    margin: 0; /* 3 */
}

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input {
    line-height: normal;
}

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select {
    text-transform: none;
}

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
}

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] {
    cursor: default;
}

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
}

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table {
    border-collapse: collapse;
    border-spacing: 0;
}

*, *:before, *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

html, body {
    font-size: 100%;
}

body {
    background: white;
    color: var(--foreground-color);
    padding: 0;
    margin: 0;
    font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif;
    font-weight: normal;
    font-style: normal;
    line-height: 1;
    position: relative;
    cursor: auto;
}

a:hover {
    cursor: pointer;
}

a:focus {
    outline: none;
}

img, object, embed {
    max-width: 100%;
    height: auto;
}

object, embed {
    height: 100%;
}

img {
    -ms-interpolation-mode: bicubic;
}

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object {
    max-width: none !important;
}

.left {
    float: left !important;
}

.right {
    float: right !important;
}

.text-left {
    text-align: left !important;
}

.text-right {
    text-align: right !important;
}

.text-center {
    text-align: center !important;
}

.text-justify {
    text-align: justify !important;
}

.hide {
    display: none;
}

.antialiased, body {
    -webkit-font-smoothing: antialiased;
}

img {
    display: inline-block;
    vertical-align: middle;
}

textarea {
    height: auto;
    min-height: 50px;
}

select {
    width: 100%;
}

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: 1.21875em;
    line-height: 1.6;
}

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption {
    line-height: 1.4;
    color: var(--accent-primary-color);
    font-weight: 300;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td {
    margin: 0;
    /*padding: 0;*/
    direction: ltr;
}

/* Default Link Styles */
a {
    color: var(--link-color-default);
    text-decoration: none;
    line-height: inherit;
}

a:hover, a:focus {
    color: var(--header-color);
}

a img {
    border: none;
}

/* Default paragraph styles */
p {
    font-family: inherit;
    font-weight: normal;
    font-size: 1em;
    line-height: 1.5;
    margin-bottom: 1.25em;
    text-rendering: optimizeLegibility;
}

p aside {
    font-size: 0.875em;
    line-height: 1.35;
    font-style: italic;
}

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif;
    font-weight: bold;
    font-style: normal;
    color: var(--accent-primary-color);
    text-rendering: optimizeLegibility;
    margin-top: 1em;
    margin-bottom: 0.5em;
    line-height: 1.2125em;
}

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small {
    font-size: 60%;
    color: var(--accent-secondary-color);
    line-height: 0;
}

h1 {
    font-size: 2.125em;
}

h2 {
    font-size: 1.6875em;
}

h3, #toctitle, .sidebarblock > .content > .title {
    font-size: 1.375em;
}

h4 {
    font-size: 1.125em;
}

h5 {
    font-size: 1.125em;
}

h6 {
    font-size: 1em;
}

hr {
    border: solid var(--border2);
    border-width: 1px 0 0;
    clear: both;
    margin: 1.25em 0 1.1875em;
    height: 0;
}

/* Helpful Typography Defaults */
em, i {
    font-style: italic;
    line-height: inherit;
}

strong, b {
    font-weight: bold;
    line-height: inherit;
}

small {
    font-size: 60%;
    line-height: inherit;
}

code {
    font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace;
    font-weight: normal;
    color: var(--link-color-default);
}

/* Lists */
ul, ol, dl {
    font-size: 1em;
    line-height: 1.5;
    margin-bottom: 1.25em;
    list-style-position: outside;
    font-family: inherit;
}

ul, ol {
    margin-left: 0;
}

/* Unordered Lists */
ul li ul, ul li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
    font-size: 1em; /* Override nested font-size change */
}

ul.square li ul, ul.circle li ul, ul.disc li ul {
    list-style: inherit;
}

ul.square {
    list-style-type: square;
}

ul.circle {
    list-style-type: circle;
}

ul.disc {
    list-style-type: disc;
}

ul.no-bullet {
    list-style: none;
}

/* Ordered Lists */
ol li ul, ol li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
}

/* Definition Lists */
dl dt {
    margin-bottom: 0.3em;
    font-weight: bold;
}

dl dd {
    margin-bottom: 0.75em;
}

/* Abbreviations */
abbr, acronym {
    text-transform: uppercase;
    font-size: 90%;
    color: black;
    border-bottom: 1px dotted var(--border2);
    cursor: help;
}

abbr {
    text-transform: none;
}

/* Blockquotes */
blockquote {
    margin: 0 0 1.25em;
    padding: 0.5625em 1.25em 0 1.1875em;
    border-left: 1px solid var(--border2);
}

blockquote cite {
    display: block;
    font-size: 0.8125em;
    color: var(--block-quote-color);
}

blockquote cite:before {
    content: "\2014 \0020";
}

blockquote cite a, blockquote cite a:visited {
    color: var(--block-quote-color);
}

blockquote, blockquote p {
    line-height: 1.5;
    color: var(--accent-secondary-color);
}

/* Microformats */
.vcard {
    display: inline-block;
    margin: 0 0 1.25em 0;
    border: 1px solid var(--border2);
    padding: 0.625em 0.75em;
}

.vcard li {
    margin: 0;
    display: block;
}

.vcard .fn {
    font-weight: bold;
    font-size: 0.9375em;
}

.vevent .summary {
    font-weight: bold;
}

.vevent abbr {
    cursor: auto;
    text-decoration: none;
    font-weight: bold;
    border: none;
    padding: 0 0.0625em;
}

@media only screen and (min-width: 768px) {
    h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
        line-height: 1.4;
    }

    h1 {
        font-size: 2.75em;
    }

    h2 {
        font-size: 2.3125em;
    }

    h3, #toctitle, .sidebarblock > .content > .title {
        font-size: 1.6875em;
    }

    h4 {
        font-size: 1.4375em;
    }
}

/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only {
    display: none !important;
}

@media print {
    * {
        background: transparent !important;
        color: var(--black-color) !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a, a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after {
        content: "";
    }

    pre, blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr, img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p, h2, h3, #toctitle, .sidebarblock > .content > .title {
        orphans: 3;
        widows: 3;
    }

    h2, h3, #toctitle, .sidebarblock > .content > .title {
        page-break-after: avoid;
    }

    .hide-on-print {
        display: none !important;
    }

    .print-only {
        display: block !important;
    }

    .hide-for-print {
        display: none !important;
    }

    .show-for-print {
        display: inherit !important;
    }
}

/* Tables */
table {
    background: white;
    margin-bottom: 1.25em;
    border: solid 0 var(--border2);
}

table thead, table tfoot {
    background: none;
    font-weight: bold;
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
    padding: 1px 8px 1px 5px;
    font-size: 1em;
    color: var(--foreground-color);
    text-align: left;
}

table tr th, table tr td {
    padding: 1px 8px 1px 5px;
    font-size: 1em;
    color: var(--foreground-color);
}

table tr.even, table tr.alt, table tr:nth-of-type(even) {
    background: none;
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
    display: table-cell;
    line-height: 1.5;
}

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after {
    content: " ";
    display: table;
}

.clearfix:after, .float-group:after {
    clear: both;
}

*:not(pre) > code {
    font-size: 0.95em;
    padding: 0;
    white-space: nowrap;
    background-color: var(--pre-background-color);
    border: 0 solid var(--border2);
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
    text-shadow: none;
}

pre, pre > code {
    line-height: 1.2;
    color: inherit;
    font-family: "Consolas", "Deja Vu Sans Mono", "Bitstream Vera Sans Mono", monospace;
    font-weight: normal;
}

kbd.keyseq {
    color: var(--dark-gray-color);
}

kbd:not(.keyseq) {
    display: inline-block;
    color: black;
    font-size: 0.75em;
    line-height: 1.4;
    background-color: var(--kdb-background-color);
    border: 1px solid #ccc;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset;
    margin: -0.15em 0.15em 0 0.15em;
    padding: 0.2em 0.6em 0.2em 0.5em;
    vertical-align: middle;
    white-space: nowrap;
}

kbd kbd:first-child {
    margin-left: 0;
}

kbd kbd:last-child {
    margin-right: 0;
}

.menuseq, .menu {
    color: black;
}

p a > code:hover {
    color: var(--link-hover-color);
}

#header, #content, #footnotes, #footer {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    margin-bottom: 0;
    max-width: 62.5em;
    *zoom: 1;
    position: relative;
    padding-left: 0.9375em;
    padding-right: 0.9375em;
}

#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after {
    content: " ";
    display: table;
}

#header:after, #content:after, #footnotes:after, #footer:after {
    clear: both;
}

#header {
    margin-bottom: 2.5em;
}

#header > h1 {
    color: var(--header-color);
    font-weight: bold;
    border-bottom: 1px solid var(--border2);
    margin-bottom: -28px;
    padding-bottom: 32px;
}

#header span {
    color: var(--accent-secondary-color);
}

#header #revnumber {
    text-transform: capitalize;
}

#header br {
    display: none;
}

#header br + span {
    padding-left: 3px;
}

#header br + span:before {
    content: "\2013 \0020";
}

#header br + span.author {
    padding-left: 0;
}

#header br + span.author:before {
    content: ", ";
}

#toc {
    border-bottom: 1px solid var(--border2);
    padding-bottom: 1.25em;
}

#toc > ul {
    margin-left: 0.25em;
}

#toc ul.sectlevel0 > li > a {
    font-style: italic;
}

#toc ul.sectlevel0 ul.sectlevel1 {
    margin-left: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

#toc ul {
    list-style-type: none;
}

#toctitle {
    color: var(--accent-primary-color);
}

@media only screen and (min-width: 1280px) {
    body.toc2 {
        padding-left: 20em;
    }

    #toc.toc2 {
        position: fixed;
        width: 20em;
        left: 0;
        top: 0;
        border-right: 1px solid var(--border2);
        border-bottom: 0;
        z-index: 1000;
        padding: 44px 1em 1em;
        height: 100%;
        overflow: auto;
    }

    #toc.toc2 > ul {
        padding-left: 1em;
    }

    #toc.toc2 #toctitle {
        margin-top: 0;
    }

    #toc.toc2 > ul {
        font-size: .95em;
    }

    #toc.toc2 ul ul {
        margin-left: 0;
        padding-left: 1.25em;
    }

    #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
        padding-left: 0;
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 20em;
    }

    body.toc2.toc-right #toc.toc2 {
        border-right: 0;
        border-left: 1px solid var(--border2);
        left: auto;
        right: 0;
    }
}

#content #toc {
    border-style: solid;
    border-width: 1px;
    border-color: var(--toc-border-color);
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: var(--pre-background-color);
    border-width: 0;
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
}

#content #toc > :first-child {
    margin-top: 0;
}

#content #toc > :last-child {
    margin-bottom: 0;
}

#content #toc a {
    color: var(--gray-color);
    text-decoration: none;
}

#content #toctitle {
    font-weight: bold;
    font-family: ff-meta-web-pro-1, ff-meta-web-pro-2, Arial, "Helvetica Neue", sans-serif;
    font-size: 1em;
    padding-left: 0.125em;
}

#footer {
    max-width: 100%;
    background-color: black;
    padding: 1.25em;
}

#footer-text {
    color: white;
    line-height: 1.35;
}

.sect1 {
    padding-bottom: 1.25em;
}

.sect1 + .sect1 {
    border-top: 1px solid var(--border2);
}

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor {
    position: absolute;
    width: 1em;
    margin-left: -1em;
    display: block;
    text-decoration: none;
    visibility: hidden;
    text-align: center;
    font-weight: normal;
}

#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before {
    content: '\00A7';
    font-size: .85em;
    vertical-align: text-top;
    display: block;
    margin-top: 0.05em;
}

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover {
    visibility: visible;
}

#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link {
    color: var(--accent-primary-color);
    text-decoration: none;
}

#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover {
    color: var(--link-hover-color);
}

.imageblock, .literalblock, .listingblock, .verseblock, .videoblock {
    margin-bottom: 1.25em;
}

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    text-align: left;
    font-weight: bold;
}

.tableblock > caption {
    text-align: left;
    font-weight: bold;
    white-space: nowrap;
    overflow: visible;
    max-width: 0;
}

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: inherit;
}

.admonitionblock > table {
    border: 0;
    background: none;
    width: 100%;
}

.admonitionblock > table td.icon {
    text-align: center;
    width: 60px;
    padding: 0;
    font-size: 1.5em;
}

.admonitionblock > table td.icon img {
    max-width: none;
}

.admonitionblock > table td.icon .title {
    font-weight: bold;
    text-transform: uppercase;
}

.admonitionblock > table td.content {
    /*padding-left: 1.125em;*/
    /*padding-right: 1.25em;*/
    border-left: 1px solid var(--border2);
    color: var(--accent-secondary-color);
}

.admonitionblock > table td.content > :last-child > :last-child {
    margin-bottom: 0;
}

.exampleblock > .content {
    border-style: solid;
    border-width: 1px;
    border-color: var(--exampleblock-border-color);
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: white;
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
}

.exampleblock > .content > :first-child {
    margin-top: 0;
}

.exampleblock > .content > :last-child {
    margin-bottom: 0;
}

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p {
    color: var(--dark-gray-color);
}

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 {
    line-height: 1;
    margin-bottom: 0.625em;
}

.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader {
    line-height: 1.4;
}

.exampleblock.result > .content {
    -webkit-box-shadow: 0 1px 8px var(--toc-border-color);
    box-shadow: 0 1px 8px var(--toc-border-color);
}

.sidebarblock {
    border-style: solid;
    border-width: 1px;
    border-color: var(--toc-border-color);
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: var(--pre-background-color);
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
}

.sidebarblock > :first-child {
    margin-top: 0;
}

.sidebarblock > :last-child {
    margin-bottom: 0;
}

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p {
    color: var(--dark-gray-color);
}

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 {
    line-height: 1;
    margin-bottom: 0.625em;
}

.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader {
    line-height: 1.4;
}

.sidebarblock > .content > .title {
    color: var(--gray-color);
    margin-top: 0;
    line-height: 1.5;
}

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child {
    margin-bottom: 0;
}

.literalblock > .content pre, .listingblock > .content pre {
    background: #eeeeee;
    border-width: 1px;
    border-style: solid;
    border-color: #cccccc;
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
    padding: 0.5em;
    word-wrap: break-word;
}

.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap {
    overflow-x: auto;
    white-space: pre;
    word-wrap: normal;
}

.literalblock > .content pre > code, .listingblock > .content pre > code {
    display: block;
}

@media only screen {
    .literalblock > .content pre, .listingblock > .content pre {
        font-size: 0.76em;
    }
}

@media only screen and (min-width: 768px) {
    .literalblock > .content pre, .listingblock > .content pre {
        font-size: 0.855em;
    }
}

@media only screen and (min-width: 1280px) {
    .literalblock > .content pre, .listingblock > .content pre {
        font-size: 0.95em;
    }
}

.listingblock > .content {
    position: relative;
}

.listingblock:hover code[class*=" language-"]:before {
    text-transform: uppercase;
    font-size: 0.9em;
    color: #999;
    position: absolute;
    top: 0.375em;
    right: 0.375em;
}

.listingblock:hover code.asciidoc:before {
    content: "asciidoc";
}

.listingblock:hover code.clojure:before {
    content: "clojure";
}

.listingblock:hover code.css:before {
    content: "css";
}

.listingblock:hover code.groovy:before {
    content: "groovy";
}

.listingblock:hover code.html:before {
    content: "html";
}

.listingblock:hover code.java:before {
    content: "java";
}

.listingblock:hover code.javascript:before {
    content: "javascript";
}

.listingblock:hover code.python:before {
    content: "python";
}

.listingblock:hover code.ruby:before {
    content: "ruby";
}

.listingblock:hover code.scss:before {
    content: "scss";
}

.listingblock:hover code.xml:before {
    content: "xml";
}

.listingblock:hover code.yaml:before {
    content: "yaml";
}

.listingblock.terminal pre .command:before {
    content: attr(data-prompt);
    padding-right: 0.5em;
    color: #999;
}

.listingblock.terminal pre .command:not([data-prompt]):before {
    content: '$';
}

table.pyhltable {
    border: 0;
    margin-bottom: 0;
}

table.pyhltable td {
    vertical-align: top;
    padding-top: 0;
    padding-bottom: 0;
}

table.pyhltable td.code {
    padding-left: .75em;
    padding-right: 0;
}

.highlight.pygments .lineno, table.pyhltable td:not(.code) {
    color: #999;
    padding-left: 0;
    padding-right: .5em;
    border-right: 1px solid var(--border2);
}

.highlight.pygments .lineno {
    display: inline-block;
    margin-right: .25em;
}

table.pyhltable .linenodiv {
    background-color: transparent !important;
    padding-right: 0 !important;
}

.quoteblock {
    margin: 0 0 1.25em;
    padding: 0.5625em 1.25em 0 1.1875em;
    border-left: 1px solid var(--border2);
}

.quoteblock blockquote {
    margin: 0 0 1.25em 0;
    padding: 0 0 0.5625em 0;
    border: 0;
}

.quoteblock blockquote > .paragraph:last-child p {
    margin-bottom: 0;
}

.quoteblock .attribution {
    margin-top: -.25em;
    padding-bottom: 0.5625em;
    font-size: 0.8125em;
    color: var(--block-quote-color);
}

.quoteblock .attribution br {
    display: none;
}

.quoteblock .attribution cite {
    display: block;
    margin-bottom: 0.625em;
}

table thead th, table tfoot th {
    font-weight: bold;
}

table.tableblock.grid-all {
    border-collapse: separate;
    border-spacing: 1px;
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
    border-top: 0 solid var(--border2);
    border-bottom: 0 solid var(--border2);
}

table.tableblock.frame-topbot, table.tableblock.frame-none {
    border-left: 0;
    border-right: 0;
}

table.tableblock.frame-sides, table.tableblock.frame-none {
    border-top: 0;
    border-bottom: 0;
}

table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child {
    margin-bottom: 0;
}

th.tableblock.halign-left, td.tableblock.halign-left {
    text-align: left;
}

th.tableblock.halign-right, td.tableblock.halign-right {
    text-align: right;
}

th.tableblock.halign-center, td.tableblock.halign-center {
    text-align: center;
}

th.tableblock.valign-top, td.tableblock.valign-top {
    vertical-align: top;
}

th.tableblock.valign-bottom, td.tableblock.valign-bottom {
    vertical-align: bottom;
}

th.tableblock.valign-middle, td.tableblock.valign-middle {
    vertical-align: middle;
}

p.tableblock.header {
    color: var(--foreground-color);
    font-weight: bold;
}

td > div.verse {
    white-space: pre;
}

ol {
    margin-left: 0.25em;
}

ul li ol {
    margin-left: 0;
}

dl dd {
    margin-left: 1.125em;
}

dl dd:last-child, dl dd:last-child > :last-child {
    margin-bottom: 0;
}

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
    margin-bottom: 0.625em;
}

ul.unstyled, ol.unnumbered, ul.checklist, ul.none {
    list-style-type: none;
}

ul.unstyled, ol.unnumbered, ul.checklist {
    margin-left: 0.625em;
}

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    margin-right: 0.25em;
}

ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    position: relative;
    top: 1px;
}

ul.inline {
    margin: 0 auto 0.625em auto;
    margin-left: -1.375em;
    margin-right: 0;
    padding: 0;
    list-style: none;
    overflow: hidden;
}

ul.inline > li {
    list-style: none;
    float: left;
    margin-left: 1.375em;
    display: block;
}

ul.inline > li > * {
    display: block;
}

.unstyled dl dt {
    font-weight: normal;
    font-style: normal;
}

ol.arabic {
    list-style-type: decimal;
}

ol.decimal {
    list-style-type: decimal-leading-zero;
}

ol.loweralpha {
    list-style-type: lower-alpha;
}

ol.upperalpha {
    list-style-type: upper-alpha;
}

ol.lowerroman {
    list-style-type: lower-roman;
}

ol.upperroman {
    list-style-type: upper-roman;
}

ol.lowergreek {
    list-style-type: lower-greek;
}

.hdlist > table, .colist > table {
    border: 0;
    background: none;
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
    background: none;
}

td.hdlist1 {
    padding-right: .8em;
    font-weight: bold;
}

td.hdlist1, td.hdlist2 {
    vertical-align: top;
}

.literalblock + .colist, .listingblock + .colist {
    margin-top: -0.5em;
}

.colist > table tr > td:first-of-type {
    padding: 0 .8em;
    line-height: 1;
}

.colist > table tr > td:last-of-type {
    padding: 0.25em 0;
}

.qanda > ol > li > p > em:only-child {
    color: var(--em-color);
}

.thumb, .th {
    line-height: 0;
    display: inline-block;
    border: solid 4px white;
    -webkit-box-shadow: 0 0 0 1px var(--border2);
    box-shadow: 0 0 0 1px var(--border2);
}

.imageblock.left, .imageblock[style*="float: left"] {
    margin: 0.25em 0.625em 1.25em 0;
}

.imageblock.right, .imageblock[style*="float: right"] {
    margin: 0.25em 0 1.25em 0.625em;
}

.imageblock > .title {
    margin-bottom: 0;
}

.imageblock.thumb, .imageblock.th {
    border-width: var(--border-radius-default);
}

.imageblock.thumb > .title, .imageblock.th > .title {
    padding: 0 0.125em;
}

.image.left, .image.right {
    margin-top: 0.25em;
    margin-bottom: 0.25em;
    display: inline-block;
    line-height: 0;
}

.image.left {
    margin-right: 0.625em;
}

.image.right {
    margin-left: 0.625em;
}

a.image {
    text-decoration: none;
}

span.footnote, span.footnoteref {
    vertical-align: super;
    font-size: 0.875em;
}

span.footnote a, span.footnoteref a {
    text-decoration: none;
}

#footnotes {
    padding-top: 0.75em;
    padding-bottom: 0.75em;
    margin-bottom: 0.625em;
}

#footnotes hr {
    width: 20%;
    min-width: 6.25em;
    margin: -.25em 0 .75em 0;
    border-width: 1px 0 0 0;
}

#footnotes .footnote {
    padding: 0 0.375em;
    line-height: 1.3;
    font-size: 0.875em;
    margin-left: 1.2em;
    text-indent: -1.2em;
    margin-bottom: .2em;
}

#footnotes .footnote a:first-of-type {
    font-weight: bold;
    text-decoration: none;
}

#footnotes .footnote:last-of-type {
    margin-bottom: 0;
}

#content #footnotes {
    margin-top: -0.625em;
    margin-bottom: 0;
    padding: 0.75em 0;
}

.gist .file-data > table {
    border: none;
    background: var(--background);
    width: 100%;
    margin-bottom: 0;
}

.gist .file-data > table td.line-data {
    width: 99%;
}

div.unbreakable {
    page-break-inside: avoid;
}

.big {
    font-size: larger;
}

.small {
    font-size: smaller;
}

.underline {
    text-decoration: underline;
}

.overline {
    text-decoration: overline;
}

.line-through {
    text-decoration: line-through;
}

.aqua {
    color: #00bfbf;
}

.aqua-background {
    background-color: #00fafa;
}

.black {
    color: black;
}

.black-background {
    background-color: black;
}

.blue {
    color: #0000bf;
}

.blue-background {
    background-color: #0000fa;
}

.fuchsia {
    color: #bf00bf;
}

.fuchsia-background {
    background-color: #fa00fa;
}

.gray {
    color: #606060;
}

.gray-background {
    background-color: #7d7d7d;
}

.green {
    color: #006000;
}

.green-background {
    background-color: #007d00;
}

.lime {
    color: #00bf00;
}

.lime-background {
    background-color: #00fa00;
}

.maroon {
    color: #600000;
}

.maroon-background {
    background-color: #7d0000;
}

.navy {
    color: #000060;
}

.navy-background {
    background-color: #00007d;
}

.olive {
    color: #606000;
}

.olive-background {
    background-color: #7d7d00;
}

.purple {
    color: #600060;
}

.purple-background {
    background-color: #7d007d;
}

.red {
    color: #bf0000;
}

.red-background {
    background-color: #fa0000;
}

.silver {
    color: #909090;
}

.silver-background {
    background-color: #bcbcbc;
}

.teal {
    color: #006060;
}

.teal-background {
    background-color: #007d7d;
}

.white {
    color: #bfbfbf;
}

.white-background {
    background-color: #fafafa;
}

.yellow {
    color: #bfbf00;
}

.yellow-background {
    background-color: #fafa00;
}

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] {
    cursor: default;
}


.admonitionblock td.icon [class^="icon-"]:before {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    cursor: default;
}

.admonitionblock td.icon .icon-note:before {
    content: "\f05a";
    color: var(--accent-primary-color);
}

.admonitionblock td.icon .icon-tip:before {
    content: "\f0eb";
    /*text-shadow: 1px 1px 2px var(--accent-primary-color);*/
    color: var(--accent-primary-color);
}

.fa {
    font-family: "FontAwesome", "Helvetica Neue", sans-serif;
}

.admonitionblock td.icon .icon-warning:before {
    content: "\f071";
    color: #bf6900;
}

.admonitionblock td.icon .icon-caution:before {
    content: "\f06d";
    color: #bf3400;
}

.admonitionblock td.icon .icon-important:before {
    content: "\f06a";
    color: #bf0000;
}

.conum {
    display: inline-block;
    color: white !important;
    background-color: black;
    -webkit-border-radius: 100px;
    border-radius: 100px;
    text-align: center;
    width: 20px;
    height: 20px;
    font-size: 12px;
    font-weight: bold;
    line-height: 20px;
    font-family: Arial, sans-serif;
    font-style: normal;
    position: relative;
    top: -2px;
    letter-spacing: -1px;
}

.conum * {
    color: white !important;
}

.conum + b {
    display: none;
}

.conum:after {
    content: attr(data-value);
}

.conum:not([data-value]):empty {
    display: none;
}

h4 {
    color: var(--gray-color);
}

.literalblock > .content > pre, .listingblock > .content > pre {
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
    margin-left: 0.5em;
    margin-right: 0.5em;
}

.admonitionblock {
    margin-left: .5em;
    margin-right: .5em;
}

.admonitionblock > table {
    border: 1px solid var(--accent-primary-color);
    border-left-width: 4px;
    background-color: var(--admotion-background-color);
    border-collapse: separate;
    -webkit-border-radius: var(--border-radius-default);
    border-radius: var(--border-radius-default);
}

.admonitionblock > table td.icon {
    padding-top: .5em;
    padding-bottom: .5em;
}

.admonitionblock > table td.content {
    padding: .5em .2em;
    color: black;
    font-size: .9em;
    border-left: none;
}

.sidebarblock {
    background-color: var(--sidebar-background-color);
    border-color: #ccc;
}

.sidebarblock > .content > .title {
    color: var(--link-color-default);
}

table.tableblock.grid-all {
    border-collapse: collapse;
    -webkit-border-radius: 0;
    border-radius: 0;
}

table.tableblock.grid-all th.tableblock, table.tableblock.grid-all td.tableblock {
    border-bottom: 1px solid #aaa;
}

#footer {
    background-color: var(--accent-primary-color);
    padding: 2em;
}

#footer-text {
    color: #eee;
    font-size: 0.8em;
    text-align: center;
}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Advanced Todo-List Sample</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_before_we_start">Before we start</a></li>
<li><a href="#_the_solution">The Solution</a>
<ul class="sectlevel2">
<li><a href="#_step_1_create_a_new_solution">Step 1: Create a new Solution</a></li>
<li><a href="#_step_2_create_a_shared_controls_library">Step 2: Create a Shared-Controls library</a></li>
<li><a href="#_step_3_implement_the_data_layer">Step 3: Implement the Data Layer</a></li>
<li><a href="#_step_4_service_layer_pattern">Step 4: Service Layer Pattern</a></li>
<li><a href="#_step_5_dialog_management">Step 5: Dialog Management</a></li>
<li><a href="#_step_6_cross_viewmodel_communication">Step 6: Cross-ViewModel Communication</a></li>
<li><a href="#_step_7_unit_testing">Step 7: Unit Testing</a></li>
</ul>
</li>
<li><a href="#_platform_specific_considerations">Platform-Specific Considerations</a>
<ul class="sectlevel2">
<li><a href="#_desktop_windows_linux_macos">Desktop (Windows, Linux, macOS)</a></li>
<li><a href="#_mobile_android_ios">Mobile (Android, iOS)</a></li>
<li><a href="#_browser_webassembly">Browser (WebAssembly)</a></li>
</ul>
</li>
<li><a href="#_troubleshooting">Troubleshooting</a>
<ul class="sectlevel2">
<li><a href="#_common_issues">Common Issues</a></li>
</ul>
</li>
<li><a href="#_future_enhancements">Future Enhancements</a></li>
<li><a href="#_see_it_in_action">See it in Action</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This sample shows how to create a cross-platform todo-list application built with Avalonia, featuring:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Persistent storage using SQLite database</p>
</li>
<li>
<p>Worker-based persistence fallback for Browser deployment (like GitHub Pages)</p>
</li>
<li>
<p>The App will run on several Platforms</p>
<div class="ulist">
<ul>
<li>
<p>Desktop (Windows, Linux, macOS)</p>
</li>
<li>
<p>Mobile (Android, iOS) and</p>
</li>
<li>
<p>Browser via WebAssembly (WASM)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Service layer pattern for clean separation of concerns</p>
</li>
<li>
<p>Using a shared Controls-Library which can be reused for other projects</p>
</li>
<li>
<p>Full unit test coverage support</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://timunie.github.io/AdvancedTodoList/">[Test the App here]</a></p>
</div>
<!-- toc disabled -->
<h3 id="_difficulty" class="discrete">Difficulty</h3>
<div class="paragraph">
<p>üêâ Hard üêâ</p>
</div>
<div class="paragraph">
<p><em>This sample is considered "Hard" since the ReadMe will not cover every step. Instead, you will have to explore the source code.</em></p>
</div>
<h3 id="_buzz_words" class="discrete">Buzz-Words</h3>
<div class="paragraph">
<p>Todo-List, Cross-Platform, WebAssembly (WASM), SQLite, Service Pattern, Dependency Injection, MVVM Pattern, IndexedDB, Unit Testing, Headless Testing, Persistent Storage, Controls-Library</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_before_we_start">Before we start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This sample is considered a bit more advanced than the other samples. If you are new to Avalonia, you should read through the beginner tutorials first, especially:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../../../README.adoc#_mvvm_samples">MVVM-Pattern</a></p>
</li>
<li>
<p><a href="../../CompleteApps/SimpleToDoList/README.adoc">Simple Todo-List</a></p>
</li>
<li>
<p><a href="../../../../README.adoc#_custom_controls_samples">Custom Controls</a></p>
</li>
<li>
<p><a href="../../../../README.adoc#_automated_ui_testing">UI-Testing</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_solution">The Solution</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_step_1_create_a_new_solution">Step 1: Create a new Solution</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure you have the latest templates installed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">dotnet new <span class="nb">install </span>Avalonia.Templates</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now create a new <code>Avalonia Cross-Platform Application</code> from your IDE or by calling the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">dotnet new avalonia.xplat <span class="nt">-o</span> AdvancedTodoList</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will get a new Solution with five different projects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight nowrap"><code data-lang="powershell"><span class="n">AdvancedTodoList.sln</span><span class="w">
</span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="nx">AdvancedTodoList.csproj</span><span class="w">            </span><span class="c"># Main application project</span><span class="w">
</span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">AdvancedTodoList.Android.csproj</span><span class="w">    </span><span class="c"># Android platform project</span><span class="w">
</span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">AdvancedTodoList.Browser.csproj</span><span class="w">    </span><span class="c"># Browser (WebAssembly) platform project</span><span class="w">
</span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="n">AdvancedTodoList.Desktop.csproj</span><span class="w">    </span><span class="c"># Desktop platform (Windows/Linux/macOS) project</span><span class="w">
</span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="n">AdvancedTodoList.iOS.csproj</span><span class="w">        </span><span class="c"># iOS platform project</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Technically, you can remove or unload any platform that you don&#8217;t want to target. For easier debugging and for the previewer to work as expected, we highly suggest keeping the Desktop-project.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you later want to add another platform, it is often easier to create a new xplat project and copy the necessary files instead of creating those by hand.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We use central package management in this project. Please refer to <a href="https://learn.microsoft.com/en-us/nuget/consume-packages/central-package-management">[official docs]</a> for more info about it.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_create_a_shared_controls_library">Step 2: Create a Shared-Controls library</h3>
<div class="paragraph">
<p>In Avalonia, you can create a standalone controls library by creating a simple class-library. For this sample we simply add it to our solution. In a real-world project consider making this a standalone project/solution.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To make the previewer work as expected, you have to reverence the class library from a valid Desktop-project. In our case we use the final App for it. If you create it as a separate solution, you can add a sample App for the same purpose.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Inside the <code>SharedControls</code> library we need those controls:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">HamburgerMenu</dt>
<dd>
<p>Navigation host with an expandable menu, common in mobile/desktop apps</p>
</dd>
<dt class="hdlist1">LabeledControl</dt>
<dd>
<p>Composite control wrapping a label and content (e.g., TextBox) for consistent input forms</p>
</dd>
<dt class="hdlist1">OverlayDialog</dt>
<dd>
<p>A control that renders above any other content, which can host notifications and input dialogs.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In addition, we will create some commonly used <code>Converter</code> and <code>Helper</code> classes.</p>
</div>
<div class="paragraph">
<p>Please see the <a href="SharedControls/">[source-code]</a> for details and further explanations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_implement_the_data_layer">Step 3: Implement the Data Layer</h3>
<div class="paragraph">
<p>Now it&#8217;s time to implement the data layer. This sample uses SQLite for persistent storage, with special handling for browser deployments using IndexedDB.</p>
</div>
<div class="sect3">
<h4 id="_sqlite_database_setup">SQLite Database Setup</h4>
<div class="paragraph">
<p>SQLite is a lightweight, file-based database that works great for desktop and mobile applications. For browser deployments, we use a worker-based approach that syncs with IndexedDB.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The key insight is that SQLite operations are similar across platforms, but the persistence mechanism differs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Desktop/Mobile</strong>: Direct file system access</p>
</li>
<li>
<p><strong>Browser</strong>: Must use IndexedDB via Web Worker</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For full documentation of SQLite, please visit the <a href="https://www.sqlite.org/docs.html">[official documentation]</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_understanding_replace_into">Understanding REPLACE INTO</h4>
<div class="paragraph">
<p>The most useful SQLite feature in this sample is the <code>REPLACE INTO</code> statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">REPLACE</span> <span class="k">INTO</span> <span class="n">Category</span> <span class="p">(</span><span class="n">Id</span><span class="p">,</span> <span class="n">Name</span><span class="p">,</span> <span class="n">Description</span><span class="p">,</span> <span class="n">Color</span><span class="p">)</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="o">@</span><span class="n">Id</span><span class="p">,</span> <span class="o">@</span><span class="n">Name</span><span class="p">,</span> <span class="o">@</span><span class="n">Description</span><span class="p">,</span> <span class="o">@</span><span class="n">Color</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="n">Last_insert_rowid</span><span class="p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This SQL statement has magical properties:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Inserts</strong> a new record if the Id doesn&#8217;t exist (null or non-matching)</p>
</li>
<li>
<p><strong>Updates</strong> the existing record if the Id already exists</p>
</li>
<li>
<p>Returns the Id of the affected row (useful for getting auto-generated IDs)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This single statement handles both creating new categories AND updating existing ones!</p>
</div>
</div>
<div class="sect3">
<h4 id="_last_insert_rowid">Last_insert_rowid()</h4>
<div class="paragraph">
<p>After a REPLACE INTO, we use <code>SELECT Last_insert_rowid()</code> to get the ID that was used:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For new records: Returns the new auto-generated ID</p>
</li>
<li>
<p>For updates: Returns the existing ID</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This allows the application to know the final ID after saving.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_4_service_layer_pattern">Step 4: Service Layer Pattern</h3>
<div class="paragraph">
<p>The application uses the service layer pattern to separate data access from business logic.</p>
</div>
<div class="sect3">
<h4 id="_why_services">Why Services?</h4>
<div class="paragraph">
<p>Services provide several critical benefits:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Testability</dt>
<dd>
<p>Mock services in unit tests without real databases</p>
</dd>
<dt class="hdlist1">Flexibility</dt>
<dd>
<p>Swap implementations (e.g., SQLite to PostgreSQL)</p>
</dd>
<dt class="hdlist1">Maintainability</dt>
<dd>
<p>Clear separation of concerns</p>
</dd>
<dt class="hdlist1">Reusability</dt>
<dd>
<p>Use services across different Views</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_service_interface_example">Service Interface Example</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="c1">// IToDoService.cs - The contract</span>
<span class="k">public</span> <span class="k">interface</span> <span class="nc">IToDoService</span>
<span class="p">{</span>
    <span class="n">Task</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="nf">SaveToDoItemAsync</span><span class="p">(</span><span class="n">ToDoItem</span> <span class="n">item</span><span class="p">);</span>
    <span class="n">Task</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="nf">DeleteToDoItemAsync</span><span class="p">(</span><span class="n">ToDoItem</span> <span class="n">item</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="c1">// ToDoService.cs - The implementation</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ToDoService</span> <span class="p">:</span> <span class="n">IToDoService</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="nf">SaveToDoItemAsync</span><span class="p">(</span><span class="n">ToDoItem</span> <span class="n">item</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">item</span><span class="p">.</span><span class="nf">SaveAsync</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="nf">DeleteToDoItemAsync</span><span class="p">(</span><span class="n">ToDoItem</span> <span class="n">item</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">item</span><span class="p">.</span><span class="nf">DeleteAsync</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_register_the_services">Register the Services</h4>
<div class="paragraph">
<p>In the main application project (typically <code>App.xaml.cs</code> or <code>Program.cs</code>) we provide a helper method to regiter all services by providing the <code>ServiceCollection</code>. Missing services will be added via the default implementation. That way we only have to provide platform-specific services where absolutely needed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="c1">// App.xaml.cs or Program.cs</span>

<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">App</span> <span class="p">:</span> <span class="n">Application</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">IServiceProvider</span> <span class="n">Services</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">null</span><span class="p">!;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RegisterAppServices</span><span class="p">(</span><span class="n">IServiceCollection</span> <span class="n">services</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Register common services if not already registered</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">services</span><span class="p">.</span><span class="nf">All</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">ServiceType</span> <span class="p">!=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">ICategoryService</span><span class="p">)))</span>
        <span class="p">{</span>
            <span class="n">services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">ICategoryService</span><span class="p">,</span> <span class="n">CategoryService</span><span class="p">&gt;();</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">services</span><span class="p">.</span><span class="nf">All</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">ServiceType</span> <span class="p">!=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">IToDoItemService</span><span class="p">)))</span>
        <span class="p">{</span>
            <span class="n">services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IToDoItemService</span><span class="p">,</span> <span class="n">ToDoItemService</span><span class="p">&gt;();</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">services</span><span class="p">.</span><span class="nf">All</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">ServiceType</span> <span class="p">!=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">IDatabaseService</span><span class="p">)))</span>
        <span class="p">{</span>
            <span class="n">services</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IDatabaseService</span><span class="p">,</span> <span class="n">DesignDbService</span><span class="p">&gt;();</span>
        <span class="p">}</span>

        <span class="n">Services</span> <span class="p">=</span> <span class="n">services</span><span class="p">.</span><span class="nf">BuildServiceProvider</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// ...  other code ...</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Important Notes:</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Services</code> property acts as the global DI container accessor</p>
</li>
<li>
<p>Register services <strong>before</strong> the app starts‚Äîtypically in the static constructor or <code>Main</code> method</p>
</li>
<li>
<p>For platform-specific implementations (like Browser vs Desktop), use the platform project to register those services.</p>
</li>
<li>
<p>For the perviewer, you may need to register a special implementation depending on the use-case.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_using_services_in_viewmodels">Using Services in ViewModels</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">EditToDoItemViewModel</span> <span class="p">:</span> <span class="n">ViewModelBase</span><span class="p">,</span> <span class="n">IDialogParticipant</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IToDoService</span> <span class="n">_toDoService</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">EditToDoItemViewModel</span><span class="p">(</span><span class="n">ToDoItemViewModel</span> <span class="n">toDoItem</span><span class="p">,</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">CategoryViewModel</span><span class="p">&gt;</span> <span class="n">availableCategories</span><span class="p">)</span>
        <span class="p">:</span> <span class="k">this</span><span class="p">(</span><span class="n">toDoItem</span><span class="p">,</span> <span class="n">availableCategories</span><span class="p">,</span>
            <span class="n">App</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">GetService</span><span class="p">&lt;</span><span class="n">IToDoService</span><span class="p">&gt;()</span> <span class="p">??</span> <span class="k">new</span> <span class="nf">ToDoService</span><span class="p">(),</span>
            <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_5_dialog_management">Step 5: Dialog Management</h3>
<div class="paragraph">
<p>The SharedControls library provides a clean way to show dialogs from ViewModels without tight coupling to the UI.</p>
</div>
<div class="sect3">
<h4 id="_how_it_works">How It Works</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement <code>IDialogParticipant</code> on your ViewModel</p>
</li>
<li>
<p>Register the ViewModel with the View using <code>DialogManager.Register</code></p>
</li>
<li>
<p>Use extension methods to show dialogs</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="c1">// ViewModel implements IDialogParticipant</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">MyViewModel</span> <span class="p">:</span> <span class="n">ViewModelBase</span><span class="p">,</span> <span class="n">IDialogParticipant</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ShowDialog</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="n">ShowOverlayDialogAsync</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span>
            <span class="s">"Title"</span><span class="p">,</span>
            <span class="s">"Content"</span><span class="p">,</span>
            <span class="n">DialogCommands</span><span class="p">.</span><span class="n">OkCancel</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="c">&lt;!-- View registers the ViewModel --&gt;</span>
<span class="nt">&lt;UserControl</span> <span class="na">local:DialogManager.Register=</span><span class="s">"{Binding}"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- UI Content --&gt;</span>
<span class="nt">&lt;/UserControl&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_6_cross_viewmodel_communication">Step 6: Cross-ViewModel Communication</h3>
<div class="paragraph">
<p>When data changes in one part of the app, other parts need to know that. We use <code>WeakReferenceMessenger</code> from <a href="https://learn.microsoft.com/en-us/dotnet/communitytoolkit/mvvm/messenger">[CommunityToolkit.Mvvm package]</a>. Below is a very minimal example usage.</p>
</div>
<div class="paragraph">
<p><strong>Sending a Message</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="c1">// After saving, notify other ViewModels</span>
<span class="n">WeakReferenceMessenger</span><span class="p">.</span><span class="n">Default</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="k">new</span> <span class="n">UpdateDataRequest</span><span class="p">&lt;</span><span class="n">ToDoItem</span><span class="p">&gt;());</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Receiving a Message</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">ManageToDoItemsViewModel</span>
    <span class="p">:</span> <span class="n">ViewModelBase</span><span class="p">,</span> <span class="n">IRecipient</span><span class="p">&lt;</span><span class="n">UpdateDataRequest</span><span class="p">&lt;</span><span class="n">ToDoItem</span><span class="p">&gt;&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Receive</span><span class="p">(</span><span class="n">UpdateDataRequest</span><span class="p">&lt;</span><span class="n">ToDoItem</span><span class="p">&gt;</span> <span class="n">message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Refresh the data when notified</span>
        <span class="n">_</span> <span class="p">=</span> <span class="nf">RefreshAsync</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Why WeakReferenceMessenger?</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No strong references - prevents memory leaks</p>
</li>
<li>
<p>Decoupled communication - senders don&#8217;t know receivers</p>
</li>
<li>
<p>Simple pattern - easy to implement</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can find out more <a href="../Avalonia.MusicStore/README.adoc#_messengers">[here]</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_step_7_unit_testing">Step 7: Unit Testing</h3>
<div class="paragraph">
<p>This sample includes comprehensive unit tests demonstrating headless testing with Avalonia.</p>
</div>
<div class="sect3">
<h4 id="_test_infrastructure">Test Infrastructure</h4>
<div class="sect4">
<h5 id="_testbase_class">TestBase Class</h5>
<div class="paragraph">
<p>All tests inherit from TestBase which sets up the environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">TestBase</span> <span class="p">:</span> <span class="n">IDisposable</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">TestBase</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 1. Set up SynchronizationContext for reactive operations</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">SynchronizationContext</span><span class="p">.</span><span class="n">Current</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">SynchronizationContext</span><span class="p">.</span><span class="nf">SetSynchronizationContext</span><span class="p">(</span>
                <span class="k">new</span> <span class="nf">AvaloniaSynchronizationContext</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="c1">// 2. Configure mock services</span>
        <span class="kt">var</span> <span class="n">serviceCollection</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ServiceCollection</span><span class="p">();</span>
        <span class="n">serviceCollection</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">IDatabaseService</span><span class="p">&gt;(</span><span class="k">new</span> <span class="nf">DesignDbService</span><span class="p">());</span>
        <span class="n">serviceCollection</span><span class="p">.</span><span class="n">AddSingleton</span><span class="p">&lt;</span><span class="n">ISettingsStorageService</span><span class="p">&gt;(</span>
            <span class="k">new</span> <span class="nf">DefaultSettingsStorageService</span><span class="p">());</span>

        <span class="c1">// 3. Build service provider</span>
        <span class="n">App</span><span class="p">.</span><span class="n">Services</span> <span class="p">=</span> <span class="n">serviceCollection</span><span class="p">.</span><span class="nf">BuildServiceProvider</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>What TestBase provides:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>SynchronizationContext</strong>: Required for async UI operations</p>
</li>
<li>
<p><strong>DesignDbService</strong>: In-memory database for tests (no file I/O)</p>
</li>
<li>
<p><strong>ServiceProvider</strong>: Dependency injection container</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_testappbuilder">TestAppBuilder</h5>
<div class="paragraph">
<p>The headless test environment is configured via TestAppBuilder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="p">[</span><span class="n">assembly</span><span class="p">:</span> <span class="nf">AvaloniaTestApplication</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">AdvancedToDoListTests</span><span class="p">.</span><span class="n">TestAppBuilder</span><span class="p">))]</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TestAppBuilder</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">AppBuilder</span> <span class="nf">BuildAvaloniaApp</span><span class="p">()</span> <span class="p">=&gt;</span>
        <span class="n">AppBuilder</span><span class="p">.</span><span class="n">Configure</span><span class="p">&lt;</span><span class="n">App</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="nf">UseHeadless</span><span class="p">(</span><span class="k">new</span> <span class="nf">AvaloniaHeadlessPlatformOptions</span><span class="p">());</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>What does "headless" mean?</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>No visible windows - tests run in console</p>
</li>
<li>
<p>Fast execution - no GUI rendering</p>
</li>
<li>
<p>Perfect for CI/CD - no display required</p>
</li>
<li>
<p>Tests logic, not pixel-perfect rendering</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_writing_tests">Writing Tests</h4>
<div class="sect4">
<h5 id="_model_tests">Model Tests</h5>
<div class="paragraph">
<p>Test data models for expected behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Category_Constructor_SetsDefaultValues</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">category</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Category</span><span class="p">();</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">Null</span><span class="p">(</span><span class="n">category</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Null</span><span class="p">(</span><span class="n">category</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Null</span><span class="p">(</span><span class="n">category</span><span class="p">.</span><span class="n">Description</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Null</span><span class="p">(</span><span class="n">category</span><span class="p">.</span><span class="n">Color</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_viewmodel_tests">ViewModel Tests</h5>
<div class="paragraph">
<p>Test ViewModel logic independently of the UI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="p">[</span><span class="n">Fact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">CategoryViewModel_PropertyChanges_NotifyCorrectly</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">viewModel</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CategoryViewModel</span><span class="p">();</span>
    <span class="kt">var</span> <span class="n">nameChanged</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>

    <span class="n">viewModel</span><span class="p">.</span><span class="n">PropertyChanged</span> <span class="p">+=</span> <span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">PropertyName</span> <span class="p">==</span> <span class="k">nameof</span><span class="p">(</span><span class="n">CategoryViewModel</span><span class="p">.</span><span class="n">Name</span><span class="p">))</span>
            <span class="n">nameChanged</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="n">viewModel</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">"Updated"</span><span class="p">;</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">nameChanged</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_view_tests">View Tests</h5>
<div class="paragraph">
<p>Also, the views can and should be tested. To do so, give each control a unique <code>Name</code>. Then you can access it from the tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="p">[</span><span class="n">AvaloniaFact</span><span class="p">]</span>
<span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">ManageCategoriesView_Should_Display_Categories</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">vm</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ManageCategoriesViewModel</span><span class="p">();</span>
    <span class="kt">var</span> <span class="n">view</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ManageCategoriesView</span>
    <span class="p">{</span>
        <span class="n">DataContext</span> <span class="p">=</span> <span class="n">vm</span>
    <span class="p">};</span>
    <span class="kt">var</span> <span class="n">window</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Window</span> <span class="p">{</span> <span class="n">Content</span> <span class="p">=</span> <span class="n">view</span> <span class="p">};</span>
    <span class="n">window</span><span class="p">.</span><span class="nf">Show</span><span class="p">();</span>

    <span class="c1">// Give some time for view initialization</span>
    <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Delay</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>

    <span class="kt">var</span> <span class="n">listBox</span> <span class="p">=</span> <span class="n">view</span><span class="p">.</span><span class="n">FindControl</span><span class="p">&lt;</span><span class="n">ListBox</span><span class="p">&gt;(</span><span class="s">"CategoriesListBox"</span><span class="p">);</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">NotNull</span><span class="p">(</span><span class="n">listBox</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">Equal</span><span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="n">Categories</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span> <span class="n">listBox</span><span class="p">.</span><span class="n">ItemCount</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sharedcontrols_tests">SharedControls Tests</h5>
<div class="paragraph">
<p>In production, all Controls, Converters and Helper-classes should be tested.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_why_test_with_services">Why Test with Services?</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Benefits of testing with mocked services:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Isolation</strong>: Tests don&#8217;t need actual database connections</p>
</li>
<li>
<p><strong>Speed</strong>: Mock services are instant (milliseconds vs seconds)</p>
</li>
<li>
<p><strong>Reliability</strong>: No external dependencies = consistent results</p>
</li>
<li>
<p><strong>CI/CD</strong>: Can run anywhere without file system access</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_platform_specific_considerations">Platform-Specific Considerations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_desktop_windows_linux_macos">Desktop (Windows, Linux, macOS)</h3>
<div class="ulist">
<ul>
<li>
<p>Direct file system access for SQLite databases</p>
</li>
<li>
<p>Standard window management</p>
</li>
<li>
<p>Full UI capabilities</p>
</li>
<li>
<p>Best for development and debugging</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_mobile_android_ios">Mobile (Android, iOS)</h3>
<div class="ulist">
<ul>
<li>
<p>SQLite stored in app&#8217;s documents directory</p>
</li>
<li>
<p>Touch-optimized UI considerations</p>
</li>
<li>
<p>Platform-specific service implementations</p>
</li>
<li>
<p>Similar to desktop in code structure</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_browser_webassembly">Browser (WebAssembly)</h3>
<div class="ulist">
<ul>
<li>
<p>IndexedDB for persistent storage (via worker)</p>
</li>
<li>
<p>No direct file system access</p>
</li>
<li>
<p>Asynchronous operations required</p>
</li>
<li>
<p>Smaller feature set in some areas</p>
</li>
<li>
<p>Great for sharing on the Web, for example via GitHub Pages!</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Browser Limitation: SQLite cannot directly access files</p>
</div>
<div class="paragraph">
<p>Solution: Use BrowserDatabaseService that:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Loads the database into memory on startup</p>
</li>
<li>
<p>Periodically saves to IndexedDB</p>
</li>
<li>
<p>Uses Web Worker for non-blocking operations</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting">Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_common_issues">Common Issues</h3>
<div class="sect3">
<h4 id="_no_toplevel_resolved_error">"No TopLevel resolved" Error</h4>
<div class="paragraph">
<p>If you see "No TopLevel was resolved for the given context", make sure your View has the DialogManager.Register property set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;UserControl</span> <span class="na">local:DialogManager.Register=</span><span class="s">"{Binding}"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- UI Content --&gt;</span>
<span class="nt">&lt;/UserControl&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_database_locked_errors">Database Locked Errors</h4>
<div class="paragraph">
<p>For SQLite, ensure you&#8217;re using proper async operations and closing connections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="k">await</span> <span class="k">using</span> <span class="nn">var</span> <span class="n">connection</span> <span class="p">=</span> <span class="k">await</span> <span class="n">DatabaseHelper</span><span class="p">.</span><span class="nf">GetOpenConnectionAsync</span><span class="p">();</span>
<span class="c1">// Use connection...</span>
<span class="c1">// Connection automatically disposed at end of using block</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tests_hang">Tests Hang</h4>
<div class="paragraph">
<p>If tests hang, ensure SynchronizationContext is properly set in TestBase:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="csharp"><span class="n">SynchronizationContext</span><span class="p">.</span><span class="nf">SetSynchronizationContext</span><span class="p">(</span>
    <span class="k">new</span> <span class="nf">AvaloniaSynchronizationContext</span><span class="p">());</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_future_enhancements">Future Enhancements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are topics to explore after mastering this sample:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Localization</strong>: Add multi-language support</p>
</li>
<li>
<p><strong>Advanced Themes</strong>: Implement more sophisticated light/dark theme switching</p>
</li>
<li>
<p><strong>Validation Rules</strong>: Add more and cleaner validation rules</p>
</li>
<li>
<p><strong>Logging</strong>: Add structured logging for debugging production issues</p>
</li>
<li>
<p><strong>Caching</strong>: Implement intelligent caching for better performance</p>
</li>
<li>
<p><strong>Offline-First</strong>: Enhance browser persistence strategies</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_it_in_action">See it in Action</h2>
<div class="sectionbody">
<div class="videoblock">
<div class="content">
<video src="_docs/final_result-2026-02-16_20.12.27.mp4" poster="Final%20result" controls>
Your browser does not support the video tag.
</video>
</div>
</div>
<div class="paragraph">
<p><a href="https://timunie.github.io/AdvancedTodoList/">Test the result on your own</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2026-02-27 15:00:30 UTC
</div>
</div>
</body>
</html>